<?xml version="1.0" encoding="UTF-8"?>
<!--
	description:

		"Developer Guide for Touch"

	copyright: "Copyright (c) 2005, Roger Kueng"
	license: "Eiffel Forum License v2 (see forum.txt)"
-->
<chapter xmlns="http://www.gobosoft.com/eiffel/gobo/documentation" id="developer_guide/build_example">
    <chapterinfo>
        <copyright>
            <year>2005</year>
            <holder>Roger Kueng</holder>
        </copyright>
        <author>
            <firstname>Roger</firstname>
            <surname>Kueng</surname>
        </author>
        <email>rkueng@student.ethz.ch</email>
        <date>29 September 2005</date>
    </chapterinfo>
    
	<title>Building a new example</title>
	<para>
		To successfully integrate an example into <projectname>TOUCH</projectname> you have to do the following steps
	</para>
    <para>
        <itemizedlist>
            <listitem>
                <para>
                    <indexlink url="#creation">Create a new class</indexlink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <indexlink url="#implementation">Implement needed features</indexlink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <indexlink url="#registration">Register the example</indexlink>
                </para>
            </listitem>
        </itemizedlist>
    </para>	
	<section id = "creation">
		<title>Create a new class</title>
		<para>
			Just create a new class and add <classname>TOUCH_EXAMPLE</classname> to the parent classes. Figure 3 shows how it should look like in Eiffelstudio.
		</para>
		    <para>
		        <image src="../images/new_example.png"/>
		    </para>
		    <para>
		        <emphasis>Figure 3: Creating a new class</emphasis>
		    </para>		
	</section>
	<section id = "implementation">
		<title>Implement needed features</title>	
		<para>
			Inheriting from <classname>TOUCH_EXAMPLE</classname> requires you to give an implementation for 
			the two features <featurename>description</featurename> and <featurename>run</featurename>. 
			You can also redefine name to give your example an other name than the name of your class. 
			If you don't redefine <featurename>run_with_scene</featurename> a standard scene and an empty
			map is set up for you. A simple example could look like the following:
		</para>
		
		    <para>
<!--		        <image src="../images/simple_example.png"/>-->
			<programlisting>
<keyword>class</keyword>
	<classname>SIMPLE_EXAMPLE</classname>

<keyword>inherit</keyword>
	<classname>TOUCH_EXAMPLE</classname>
		<keyword>redefine</keyword>
			<featurename>run_with_scene</featurename>
		<keyword>end</keyword>

<keyword>feature</keyword> <comment>Access</comment>
	<featurename>description</featurename>: <classname>STRING</classname> <keyword>is</keyword>
		<keyword>once</keyword>
			<keyword>Result</keyword> := "Hello World Example"
		<keyword>end</keyword>

<keyword>feature</keyword> <comment>Basic operations</comment>
	<featurename>run_with_scene</featurename> (exit_scene: <classname>EM_SCENE</classname>): <classname>EM_SCENE</classname> <keyword>is</keyword>
		<keyword>local</keyword>
			<variablename>example_scene</variablename>: <classname>TOUCH_SIMPLE_TRAFFIC_SCENE</classname>
		<keyword>do</keyword>
			<comment>Create the scene we want our example to run</comment>
			create example_scene.make_with_zurich_little (Current)
			<comment>Set the exit_scene</comment>
			example_scene.set_next_scene (exit_scene)
			<comment>Return scene</comment>
			<keyword>Result</keyword> := example_scene
		<keyword>end</keyword>
		
	<featurename>run</featurename> (a_runtime: <classname>TOUCH_EXAMPLE_RUNTIME</classname>) <keyword>is</keyword>
		<keyword>do</keyword>
			<comment>Ouptut Hello World</comment>
			a_runtime.console_out ("Hello World")
		<keyword>end</keyword>
		
<keyword>end</keyword> <comment>class SIMPLE_EXAMPLE</comment>
				
				</programlisting>
				
		    </para>	

	</section>
	<section id = "registration">
		<title>Register the example</title>
		<para>	
		So let's say you have written your own example and want to test it. You compile the project but you can't find your example anywhere. This is because you have to register your example to <libraryname>TOUCH</libraryname> first. To do this you have to load the <classname>TOUCH_EXAMPLE_SELECTION_SCENE</classname> class and edit one of its features.
		</para>
		    <para>
		        <image src="../images/example_intialization.png"/>
		    </para>
		    <para>
		        <emphasis>Figure 4: Example initialization</emphasis>
		    </para>
		<para>
		If you want your example to appear in one of the chapters then you must add your example in <featurename>fill_chapter_examples</featurename>. If you wanted to add <classname>SIMPLE_EXAMPLE</classname> to chapter 1 you would have to add the follwing:
		</para>
		<para>
			<programlisting>
<text>    </text><variablename>chapter_examples</variablename>.i_th (1).subscribe (create {<classname>SIMPLE_EXAMPLE</classname>})
			</programlisting>
		</para>
		
		<para>
		To change the number of chapters. Just adapt the following line in the code or call it later to create more chapters:
		</para>
		<para>
			<programlisting>
<text>    </text><variablename>chapter_examples</variablename>.set_count (5)
			</programlisting>
		</para>
		
		<para>
		If your example does not belong to any chapter you can put it to the exercises. Just add the following line to fill_exercises:
		</para>
		<para>
			<programlisting>
<text>    </text><variablename>exercises</variablename>.subscribe (create {<classname>SIMPLE_EXAMPLE</classname>})
			</programlisting>
		</para>
		
	</section>
	<toplink/>
</chapter>

