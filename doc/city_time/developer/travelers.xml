<?xml version="1.0"?>
<chapter xmlns="http://www.gobosoft.com/eiffel/gobo/documentation" id="citytime/developer/travelers">
<chapterinfo>
	<copyright>
		<year>2005</year>
		<holder>Michela Pedroni</holder>
	</copyright>
    <email>michela.pedroni@inf.ethz.ch</email>
	<date>$Date$</date>
</chapterinfo>

<title>Travelers</title>
<section id="traffic_traveler">
	<para/>
	<title>TRAFFIC_TRAVELER</title>
	<para>
	</para>
	<title>Description</title>
	<para>
	The class <classname cluster="tr_traffic">TRAFFIC_TRAVELER</classname> provides all the information which the <class cluster="tr_traffic.tr_visualization.tr_3d_visualization">TRAVELER_REPRESENTATION</class> needs to draw the traveler.
	There is the <featurename class="tr_traffic.traffic_traveler">traffic_type</featurename> which gives the type of the traveler, in this application only "tram" and "walking" type are used (descendants of the class <classname cluster="tr_traffic.tr_type">TRAFFIC_TYPE</classname>).
	The feature <featurename class="tr_traffic.traffic_traveler">take_tour</featurename> is given to the <class cluster="tr_traffic.tr_util.tr_base_extension.tr_tr_time">TRAFFIC_TIME</class> where it is used to get the current position of the traveler.
	There are 3 basic types of travelers: directed ones, where in the constructor an itinerary is given (ARRAYED_LIST [EM_VECTOR_2D]). Random ones which start at an origin (EM_VECTOR_2D) and fully random ones where origin, destination and speed are all given by random.
	</para>
	<title>TRAFFIC_LINE_TRAVELER</title>
	<para>
	</para>
	<title>Description</title>
	<para>
	The class <classname cluster="tr_traffic">TRAFFIC_LINE_TRAVELER</classname> is a descendant from the class <classname cluster="tr_traffic">TRAFFIC_TRAVELER</classname>. As there is an obvious need for travelers which move on instances from class <classname cluster="tr_traffic">TRAFFIC_LINE</classname>, 
	this class was created. It creates travelers of type "tram" if given a line. There is a comment in the code how to change this class such that the new objects have the same type as the line. Moreover in the class <classname cluster="tr_traffic.tr_visualization.tr_3d_visualization">TRAFFIC_TRAVELER_REPRESENTATION</classname>
	the feature <featurename class="tr_traffic.tr_visualization.tr_3d_visualization.traffic_traveler_representation">add_traveler</featurename> has to be adapted. This should be a short task, but *.obj files should be provided (there are only trams and passengers modeled up to now).
	If there is a need to set a line_traveler to a specific place there is the feature <featurename class="tr_traffic.traffic_line_traveler">set_to_place</featurename> which checks if the place is on the line and then places the traveler to that place. If one needs a place he can get it by calling the feature
	<featurename class="tr_traffic.traffic_line_traveler">get_place</featurename> which returns the place at 'number' in the feature <featurename class="tr_traffic.traffic_line_traveler">last_place</featurename>. 
	</para>
	<toplink/>
</section>

<section id="traffic_traveler_representation">
	<para/>
	<title>TRAFFIC_TRAVELER_REPRESENTATION</title>
	<title>Description</title>
	<para>
	The class <classname cluster="tr_traffic.tr_visualization.tr_3d_visualization">TRAFFIC_TRAVELER_REPRESENTATION</classname> is responsible for distributing travelers of all kind on the plane.
	It stores all the travelers in a container and provides a feature to the map to draw all it's objects. 
	</para>
	<title>Travelers distribution</title>
	<para>
	As there is a traffic_traveler object always associated to the 3D object which is drawn in this class, the position of each travelers is given by it's corresponding traveler.
	Because of performance reasons the traveler stores it's position according to the position on the map (the traveler uses the feature <featurename class="tr_traffic.tr_visualization.tr_3d_visualization.tr_3d_constants">map_to_gl_coords</featurename> by itself).
	As one should be able to change the map and its size this should be changed sometime.
	</para>  
	<title>Adding travelers</title>
	<para>
	A 3D passenger object can be added to the map by calling the add_traveler feature with a corresponding TRAFFIC_TRAVELER object. As for the use of the traffic model the feature <featurename class="tr_traffic.tr_visualization.tr_3d_visualization.traveler_representation">add_trams_per_line</featurename> is provided which 
	adds 'number' trams to the lines of 'a_map'. There can only be as many trams per line as there are stops.
	</para>
	<toplink/>
</section>
</chapter>
