<?xml version="1.0" encoding="UTF-8"?>

<chapter xmlns="http://www.gobosoft.com/eiffel/gobo/documentation" id="developer_guide/index">
     <chapterinfo>
        <copyright>
            <year>2005</year>
            <holder>Michela Pedroni</holder>
        </copyright>
        <email>michela.pedroni@inf.ethz.ch</email>
        <date>$Date: 2006/03/26 10:54:24 $</date>
    </chapterinfo>

<title>Touch Library Classes</title>
 <section id="top_of_page">
	<title>Overview over the classes</title>
	<para>
		In the following sections, the classes of the <emphasis>Touch Library</emphasis> are described. 
		Each class description consists of:
		Requirements, Description and Class Overview. In the Requirements, the name of classes you need 
		to know, in order to understand the described class is given. Description is a short description 
		of what the class does. It is more detailed than just the class description that you find in 
		the class header. The Class Overview provides a class diagram. 
	</para>

	<toplink/>
	<title>Most important classes for developers</title>

	<itemizedlist>
		
		<listitem>
			<link url="#touch_building">TOUCH_BUILDING</link>
		</listitem>
		<listitem>
			<link url="#touch_console">TOUCH_CONSOLE</link>
		</listitem>
		<listitem>
			<link url="#touch_line">TOUCH_LINE</link>
		</listitem>
		<listitem>
			<link url="#touch_map">TOUCH_MAP</link>
		</listitem>
		<listitem>
			<link url="#touch_paris_objects">TOUCH_PARIS_OBJECTS</link>
		</listitem>
		<listitem>
			<link url="#touch_route">TOUCH_ROUTE</link>
		</listitem>
		<listitem>
			<link url="#touch_simple_line">TOUCH_SIMPLE_LINE</link>
		</listitem>
		<listitem>
			<link url="#touch_3d_application">TOUCH_3D_APPLICATION</link>
		</listitem>
		<listitem>
			<link url="#touch_3d_constants">TOUCH_3D_CONTSTANTS</link>
		</listitem>
		<listitem>
			<link url="#touch_3d_map_widget">TOUCH_3D_MAP_WIDGET</link>
		</listitem>
		<listitem>
			<link url="#touch_3d_scene">TOUCH_3D_SCENE</link>
		</listitem>
		<listitem>
			<link url="#tourism">TOURISM</link>
		</listitem>
		<listitem>
			<link url="#touch_place">TOUCH_PLACE</link>
		</listitem>
		<listitem>
			<link url="#touch_shared_map_widget">TOUCH_SHARED_MAP_WIDGET</link>
		</listitem>
		<listitem>
			<link url="#touch_road">TOUCH_ROAD</link>
		</listitem>
	</itemizedlist>
</section>

	<section id="touch_building">
		<title>TOUCH_BUILDING</title>
		<title>Description</title>
		<para>
			The class represents buildings in a touch application which can be spotlighted and are created at a specific place. 
		</para>
		<para>
			The features <featurename>make_at_place</featurename> takes a traffic_place and the 
			singleton variable map_widget from <classname>TOUCH_SHARED_MAP_WIDGET</classname> and creates 
			a building at the location of the place. The center of the building is at (place_position.x, place_position.y + 1). 
		</para>
		<para>
			The other calls are forwarded to the corresponding object of type <classname>TRAFFIC_BUILDING</classname>. 
		</para>

		<title>Class overview</title>
		<para>
			<image src="image/touch_building_clients.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_console">
		<title>TOUCH_CONSOLE</title>
		<title>Description</title>
		<para>
			The console displays results of feature calls or ordinary text. It inherits from EM_TEXTAREA 
			which itself is inheriting from EM_TEXTBOX.  
		</para>
		<para>
			The features <featurename>append_text</featurename> and <featurename>put_string</featurename>
			append the new text which is passed as string-argument at the end of the text already 
			existing in the console. 
			The feature <featurename>prepend_text</featurename> inserts the new text at the beginning of 
			the already present text. Feature <featurename>show</featurename> displays the text in the 
			area specified as console. 
		</para>
		<para>
			The console is created in the <classname>TOUCH_3D_SCENE</classname> and is disabled, that the user
			can not write into it. 
		</para>

		
		<title>Class overview</title>
		<para>
			<image src="image/touch_console.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_line">
		<title>TOUCH_LINE</title>
		<title>Description</title>
		<para>
			The class <classname>TOUCH_LINE</classname> represents a traffic line in a touch application. 
		</para>
		<para>
			The touch line connects the <classname>TRAFFIC_LINE</classname> with the singleton variable map_widget from 
			<classname>TOUCH_SHARED_MAP_WIDGET</classname>. The calls are 
			forwarded to an object of type <classname>TRAFFIC_LINE</classname>.  			

		</para>
		
		<title>Class overview</title>
		<para>
			<image src="image/touch_line.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_map">
		<title>TOUCH_MAP</title>
		<title>Description</title>
		<para>
			This class forwards calls to the <classname>TRAFFIC_MAP</classname> and the 
			singleton variable map_widget from <classname>TOUCH_SHARED_MAP_WIDGET</classname>. 
		</para>
		<title>Class overview</title>
		<para>
			<image src="image/touch_map.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_paris_objects">
		<title>TOUCH_PARIS_OBJECTS</title>
		<title>Description</title>
		<para>
			The class <classname>TOUCH_PARIS_OBJECTS</classname> is a collection of all 
			predefined objects used by the examples of the Touch of Class book. 
		</para>
		<para>
			The lines and places are singeltons. 
		</para>
		<para>
			To access the predifined objects in <classname>TOUCH_PARIS_OBJECTS</classname> the map of Paris 
			muest be loaded. The query provides information about this
		</para>

		<title>Class overview</title>
		<para>
			<image src="image/touch_paris_objects.png"/>
		</para>
		<toplink/>
	</section>

		<section id="touch_route">
		<title>TOUCH_ROUTE</title>
		<title>Description</title>
		<para>
				This class forwards calls to the class <classname>TRAFFIC_ROUTE</classname> 
				and provides a traveler which travels along the route. 
		</para>
		<para>
				The feature <featurename>animate</featurename> triggers the traveler to travel
				along the route. After reaching its destination, the traveler is removed again. 
		</para>

		<title>Class overview</title>
		<para>
				<image src="image/touch_route.png"/>
		</para>
		<toplink/>
	</section>


	<section id="touch_simple_line">
		<title>TOUCH_SIMPLE_LINE</title>
		<title>Description</title>
		<para>
				This class forwards calls to the class <classname>TRAFFIC_SIMPLE_LINE</classname> 
				and its representation. 
		</para>
		<para>
			The creation feature <featurename>make_with_line_and_represenation</featurename> takes a 
			<classname>TRAFFIC_SIMPLE_LINE</classname> and the singleton variable map_widget from 
			<classname>TOUCH_SHARED_MAP_WIDGET</classname>
			to set the internal implementation features. 
		</para>
		<para>
			The connection from the line to it's representation (via the singleton variable map_widget) is needed for the highlighting of the line. 
		</para>
		<title>Class overview</title>
		<para>
			Suppliers:
		</para>
		<para>
			<image src="image/touch_simple_line.png"/>
		</para>
		<para>
			Clients:
		</para>
		<para>
			<image src="image/touch_simple_line_clients.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_3d_application">
		<title>TOUCH_3D_APPLICATION</title>
		<title>Description</title>
		<para>
			The <classname>TOUCH_3D_APPLICATION</classname> sets the first scene of the example. Feature 
			<featurename>make</featurename> initializes the screen and sets the scene.  
			All the individual examples are inheriting from this class.
		</para>
		
		<title>Class overview</title>
		<para>
			<image src="image/touch_3d_application.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_3d_constants">
		<title>TOUCH_3D_CONSTANTS</title>
		<title>Description</title>
		<para>
			Here are all the constants defined which are used for the main window. The size of the main 
			window is specified as well as properties for the objects which are drawn on to the map 
			(for example the line width, the place height, the plane size etc.).							
		</para>
		<para>
			The feature <featurename>map_to_gl_coords</featurename> transforms the coordinates 
			specified in the xml file to the coordinates of the plane. The Louvre has for example 
			the xml-coordinates ~ (530, 640). Transformed to the plane which has coordinates between 
			-25 and 25 in both axix, the Louvre has gl-coordinates of ~ (4.9, -1.6). 
		</para>

		<title>Class overview</title>
		<para>
			<image src="image/touch_3d_constants.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_3d_map_widget">
		<title>TOUCH_3D_MAP_WIDGET</title>
		<title>Description</title>
		<para>
			The class <classname>TOUCH_3D_MAP_WIDGET</classname> adds events and their handlers to the
			map from  <classname>TRAFFIC_3D_MAP_WIDGET</classname>. 
		</para>
		<para>
			The following event handlers are added: 
			The <featurename>wheel_down</featurename> and <featurename>wheel_up</featurename> zoom into, 
			respectively out of the map. The <featurename>mouse_drag</featurename> rotates the map. 
		</para>
		<title>Class overview</title>
		<para>
			<image src="image/touch_3d_map_widget.png"/>
		</para>
		<toplink/>
	</section>

	<section id="touch_3d_scene">
		<title>TOUCH_3D_SCENE</title>
		<title>Description</title>
		<para>
			<classname>TOUCH_3D_SCENE</classname> specifies the widgets which are used for the main window. The feature 
			<featurename>make</featurename> creates all buttons and subscribes its event handlers. It 
			furthermore combines the buttons and the console to the panel at the right side. 									
		</para>
		<para>
			All the scenes of the touch examples inherit from this class in order to define its individual scene. 
			For example, the <classname>PREVIEW_3D_SCENE</classname> from the preview example 
			inherits from this class to subscribe the click_here_button and to create and invoke the
			example code of preview.  
		</para>

		<title>Class overview</title>
		<para>
			<image src="image/touch_3d_scene.png"/>
		</para>
		<toplink/>
	</section>

	<section id="tourism">
		<title>TOURISM</title>
		<title>Description</title>
		<para>
			In this class, the <classname>TOUCH_MAP</classname> "Paris" is loaded. 
			Features which are used in the individual examples (<featurename>explore</featurename> and 
			<featurename>explore_on_click</featurename>) are defined as deferred. 
		</para>
		<para>
			 The information, which map has been loaded can be retrieved by invoking the feature 
			 <featurename>is_zurich_loaded</featurename> or <featurename>is_paris_loaded</featurename>. 
		</para>
		<para>
			Access to the touch console is given through the feature <featurename>console</featurename>.
			Acces to the map widget is given through the singleton variable <featurename>map_widget</featurename> 
			form <classname>TOUCH_SHARED_MAP_WIDGET</classname>.
		</para>
		<para>
			The feature <featurename>run</featurename> sets the <featurename>console</featurename> and invokes explore. 
		</para>

		<title>Class overview</title>
		<para>
			<image src="image/tourism.png"/>
		</para>
		<toplink/>
	</section>
	
	<section id="touch_place">
		<title>TOUCH_PLACE</title>
		<title>Description</title>
		<para>
			A <classname>TOUCH_PLACE</classname> contains a <classname>TRAFFIC_PLACE</classname> and a
			<classname>TRAFFIC_NODE</classname> which are created with a name and a position and are inserted
			into the singleton variable map_widget from <classname>TOUCH_SHARED_MAP_WIDGET</classname>.
		</para>
		<para>
			A <classname>TOUCH_PLACE</classname> can be linked with another <classname>TOUCH_PLACE</classname>
			with the feature <featurename>link</featurename>.
		</para>
		
		<title>Class overview</title>
		<para>
			<image src="image/touch_place.png"/>
		</para>
		<toplink/>
	</section>
	
	<section id="touch_shared_map_widget">
		<title>TOUCH_SHARED_MAP_WIDGET</title>
		<title>Description</title>
		<para>
			Contains a singleton variable map_widget which is used by many classes using a 
			<classname>TOUCH_3D_MAP_WIDGET</classname> allowing easy access for representational 
			features and a general way of accessing maps in the touch applications.
		</para>
		
		<title>Class overview</title>
		<para>
			<image src="image/touch_shared_map_widget.png"/>
		</para>
		<toplink/>
	</section>
	
	<section id="touch_road">
		<title>TOUCH_ROAD</title>
		<title>Requirements</title>
		<para>
			NONE
		</para>
		<title>Description</title>
		<para>
			Allows to create a <classname>TRAFFIC_ROAD</classname> given a list of <classname>TOUCH_PLACES</classname>.
			It is possible to create a uncolored road using <featurename>make_road</featurename> or a colored one
			using <featurename>make_colored_road</featurename> which manipulates the rgb-color of the <classname>TRAFFIC_PLACES</classname> 
			contained in the <classname>TOUCH_PLACE</classname>.
		</para>
		
		<title>Class overview</title>
		<para>
			<image src="image/touch_road.png"/>
		</para>
		<toplink/>
	</section>
</chapter>
